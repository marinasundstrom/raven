/*
 * Demonstrates discriminated unions in Raven.
 */

import System.Console.*

val unwrapped = returnsNone(42).UnwrapOr(10)
WriteLine(unwrapped)

func returnsNone(value: int) -> Option<int> {
    return None
}

union Option<T> {
    Some(value: T)
    None
}

extension OptionExtensions<T> for Option<T> {
    UnwrapOrDefault() -> T {
        if self is Some(val value) {
            return value
        }
        return default(T)
    }

    UnwrapOrThrow() -> T {
        if self is Some(val value) {
            return value
        }
        throw new System.InvalidOperationException("Option is None")
    }

    UnwrapOr(defaultValue: T) -> T {
        if self is Some(val value) {
            return value
        }
        return defaultValue
    }
}