import System.*
import System.Console.*
import System.IO.*
import System.Threading.Tasks.*

try {
    use stream = MemoryStream()
    val value = await Task.FromResult(42)
    stream.WriteByte(Convert.ToByte(value))
    WriteLine("value:$value")
    throw InvalidOperationException("boom")
} catch (Exception e) {
    WriteLine("caught:${e.Message}")
}

WriteLine("completed")
