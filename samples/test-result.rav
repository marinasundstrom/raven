/*
 * Demonstrates discriminated unions in Raven.
 */

import System.*

val res = parseNumber("foo")

Console.WriteLine("Is error: ${res.IsError}")

val str = res match {
    .Ok(v) => "Number is: $v"
    .Error(message) => message
}

Console.WriteLine(str)

try {
    val res2 = parseNumber("foo").UnwrapOrThrow()
} catch (Exception e) {
    Console.WriteLine("\'parseNumber\' threw: ${e.Message}")
}

func parseNumber(str: string) -> Result<int> {
    return try int.Parse(str) match {
        int v => .Ok(v)
        Exception exc => .Error(exc.Message)
    }
}
